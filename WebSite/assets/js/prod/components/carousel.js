!function($){var methods={init:function(options){var defaults={time_constant:200,dist:-100,shift:0,padding:0,full_width:!1};return options=$.extend(defaults,options),this.each(function(){function setupEvents(){"undefined"!=typeof window.ontouchstart&&(view[0].addEventListener("touchstart",tap),view[0].addEventListener("touchmove",drag),view[0].addEventListener("touchend",release)),view[0].addEventListener("mousedown",tap),view[0].addEventListener("mousemove",drag),view[0].addEventListener("mouseup",release),view[0].addEventListener("click",click)}function xpos(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ypos(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function wrap(x){return x>=count?x%count:0>x?wrap(count+x%count):x}function scroll(x){var i,half,delta,dir,tween,el,alignment;for(offset="number"==typeof x?x:offset,center=Math.floor((offset+dim/2)/dim),delta=offset-center*dim,dir=0>delta?1:-1,tween=-dir*delta*2/dim,options.full_width?alignment="translateX(0)":(alignment="translateX("+(view[0].clientWidth-item_width)/2+"px) ",alignment+="translateY("+(view[0].clientHeight-item_width)/2+"px)"),el=images[wrap(center)],el.style[xform]=alignment+" translateX("+-delta/2+"px) translateX("+dir*options.shift*tween*i+"px) translateZ("+options.dist*tween+"px)",el.style.zIndex=0,tweenedOpacity=options.full_width?1:1-.2*tween,el.style.opacity=tweenedOpacity,half=count>>1,i=1;half>=i;++i)options.full_width?(zTranslation=options.dist,tweenedOpacity=i===half&&0>delta?1-tween:1):(zTranslation=options.dist*(2*i+tween*dir),tweenedOpacity=1-.2*(2*i+tween*dir)),el=images[wrap(center+i)],el.style[xform]=alignment+" translateX("+(options.shift+(dim*i-delta)/2)+"px) translateZ("+zTranslation+"px)",el.style.zIndex=-i,el.style.opacity=tweenedOpacity,options.full_width?(zTranslation=options.dist,tweenedOpacity=i===half&&delta>0?1-tween:1):(zTranslation=options.dist*(2*i-tween*dir),tweenedOpacity=1-.2*(2*i-tween*dir)),el=images[wrap(center-i)],el.style[xform]=alignment+" translateX("+(-options.shift+(-dim*i-delta)/2)+"px) translateZ("+zTranslation+"px)",el.style.zIndex=-i,el.style.opacity=tweenedOpacity;el=images[wrap(center)],el.style[xform]=alignment+" translateX("+-delta/2+"px) translateX("+dir*options.shift*tween+"px) translateZ("+options.dist*tween+"px)",el.style.zIndex=0,tweenedOpacity=options.full_width?1:1-.2*tween,el.style.opacity=tweenedOpacity}function track(){var now,elapsed,delta,v;now=Date.now(),elapsed=now-timestamp,timestamp=now,delta=offset-frame,frame=offset,v=1e3*delta/(1+elapsed),velocity=.8*v+.2*velocity}function autoScroll(){var elapsed,delta;amplitude&&(elapsed=Date.now()-timestamp,delta=amplitude*Math.exp(-elapsed/options.time_constant),delta>2||-2>delta?(scroll(target-delta),requestAnimationFrame(autoScroll)):scroll(target))}function click(e){if(dragged)return e.preventDefault(),e.stopPropagation(),!1;if(!options.full_width){var clickedIndex=$(e.target).closest(".carousel-item").index(),diff=center%count-clickedIndex;0>diff?Math.abs(diff+count)<Math.abs(diff)&&(diff+=count):diff>0&&Math.abs(diff-count)<diff&&(diff-=count),0>diff?$(this).trigger("carouselNext",[Math.abs(diff)]):diff>0&&$(this).trigger("carouselPrev",[diff])}}function tap(e){pressed=!0,dragged=!1,vertical_dragged=!1,reference=xpos(e),referenceY=ypos(e),velocity=amplitude=0,frame=offset,timestamp=Date.now(),clearInterval(ticker),ticker=setInterval(track,100)}function drag(e){var x,delta,deltaY;if(pressed)if(x=xpos(e),y=ypos(e),delta=reference-x,deltaY=Math.abs(referenceY-y),30>deltaY&&!vertical_dragged)(delta>2||-2>delta)&&(dragged=!0,reference=x,scroll(offset+delta));else{if(dragged)return e.preventDefault(),e.stopPropagation(),!1;vertical_dragged=!0}return dragged?(e.preventDefault(),e.stopPropagation(),!1):void 0}function release(e){return pressed=!1,clearInterval(ticker),target=offset,(velocity>10||-10>velocity)&&(amplitude=.9*velocity,target=offset+amplitude),target=Math.round(target/dim)*dim,amplitude=target-offset,timestamp=Date.now(),requestAnimationFrame(autoScroll),e.preventDefault(),e.stopPropagation(),!1}var images,offset,center,pressed,dim,count,reference,referenceY,amplitude,target,velocity,xform,frame,timestamp,ticker,dragged,vertical_dragged,view=$(this);return view.hasClass("initialized")?!0:(options.full_width&&(options.dist=0,imageHeight=view.find(".carousel-item img").first().load(function(){view.css("height",$(this).height())})),view.addClass("initialized"),pressed=!1,offset=target=0,images=[],item_width=view.find(".carousel-item").first().innerWidth(),dim=2*item_width+options.padding,view.find(".carousel-item").each(function(){images.push($(this)[0])}),count=images.length,xform="transform",["webkit","Moz","O","ms"].every(function(prefix){var e=prefix+"Transform";return"undefined"!=typeof document.body.style[e]?(xform=e,!1):!0}),window.onresize=scroll,setupEvents(),scroll(offset),$(this).on("carouselNext",function(e,n){void 0===n&&(n=1),target=offset+dim*n,offset!==target&&(amplitude=target-offset,timestamp=Date.now(),requestAnimationFrame(autoScroll))}),void $(this).on("carouselPrev",function(e,n){void 0===n&&(n=1),target=offset-dim*n,offset!==target&&(amplitude=target-offset,timestamp=Date.now(),requestAnimationFrame(autoScroll))}))})},next:function(n){$(this).trigger("carouselNext",[n])},prev:function(n){$(this).trigger("carouselPrev",[n])}};$.fn.carousel=function(methodOrOptions){return methods[methodOrOptions]?methods[methodOrOptions].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof methodOrOptions&&methodOrOptions?void $.error("Method "+methodOrOptions+" does not exist on jQuery.carousel"):methods.init.apply(this,arguments)}}(jQuery);